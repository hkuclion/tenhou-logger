requirejs(['Vue','class/assistWindow/Dispatcher'], function (Vue, Dispatcher) {
	let root_dom = document.createElement('div');
	document.body.appendChild(root_dom);

	Vue.component('dispatcher', function (resolve, reject) {
		requirejs(['component/assistWindow/dispatcher'], resolve);
	});

	let dispatcher = new Dispatcher();

	let vue = new Vue({
		el:root_dom,
		template:`<dispatcher :Dispatcher="dispatcher"></dispatcher>`,
		data:{
			dispatcher
		},
	});

	let simulation_data = [
		//'<GO type="65" lobby="0" gpid="C4AC469B-CCD430B4"/>',
		//'<UN n0="%68%6B%75%63%7A" n1="%E3%81%8E%E3%82%87%E3%81%B4%63%68%61%6E" n2="%E8%87%AD%E3%81%84%E3%82%88%E3%81%93%E3%81%AE%E8%B6%B3%E8%A3%8F" n3="%43%65%73%73%70%6F%6F" dan="0,8,3,1" rate="1500.00,1587.44,1323.00,1521.11" sx="M,F,M,M"/>',
		//'<TAIKYOKU oya="1" log="2015031523gm-0041-0000-4728bc2b"/>',
		/*
		'<INIT seed="0,0,0,2,0,104" ten="250,250,250,250" oya="1" hai="85,45,107,135,109,32,86,67,62,28,87,22,11"/>',
		'<U/>',
		'<E117/>',
		'<V/>',
		'<F61/>',
		'<W/>',
		'<G123/>',
		'<T24/>',
		'<D p="107" />',
		'<D107/>',
		'<U/>',
		'<E131/>',
		'<N who="2" m="50251" />',
		'<F7/>',
		'<W/>',
		'<g36/>',
		'<T98/>',
		'<D p="109" />',
		'<D109/>',
		'<U/>',
		'<E71/>',
		'<V/>',
		'<F100/>',
		'<W/>',
		'<G108/>',
		'<T110/>',
		'<D p="110" />',
		'<D110/>',
		'<U/>',
		'<E38/>',
		'<V/>',
		'<f114/>',
		'<W/>',
		'<g43/>',
		'<T41/>',
		'<D p="135" />',
		'<D135/>',
		'<U/>',
		'<E111/>',
		'<V/>',
		'<AGARI ba="0,0" hai="46,49,54,72,78,82,93,95,124,126,127" m="50251" machi="72" ten="40,5200,0" yaku="18,1,19,1,52,1" doraHai="104" who="2" fromWho="2" sc="250,-13,250,-26,250,52,250,-13" />',
		*/
		'<INIT seed="2,0,0,3,3,35" ten="237,250,276,237" oya="3" hai="133,26,69,112,108,59,70,46,47,5,122,21,103"/>',
		'<W/>',
		'<G118/>',
		'<T4/>',
		//'<D p="122" />',
		'<D122/>',
		'<U/>',
		'<E76/>',
		'<V/>',
		'<F72/>',
		'<W/>',
		'<G41/>',
		'<T31/>',
		//'<D p="108" />',
		'<D108/>',
		'<U/>',
		'<E135/>',
		'<V/>',
		'<F115/>',
		'<W/>',
		'<G49/>',
		'<T23/>',
		//'<D p="112" />',
		'<D112/>',
		'<U/>',
		'<E71 t="1"/>',
		//'<N type="1" hai0="70" hai1="69" />',
		'<N who="0" m="27145" />',
		//'<D p="133" />',
		'<D133/>',
		'<U/>',
		'<e110/>',
		'<V/>',
		'<F116/>',
		'<W/>',
		'<g134/>',
		'<T7/>',
		//'<D p="59" />',
		'<D59/>',
		'<U/>',
		'<E2/>',
		'<V/>',
		'<F117/>',
		'<W/>',
		'<G111/>',
		'<T94/>',
		//'<D p="103" />',
		'<D103/>',
		'<U/>',
		'<E29/>',
		'<V/>',
		'<F89/>',
		'<N who="3" m="55599" />',
		'<G95/>',
		'<T66/>',
		//'<D p="94" />',
		'<D94/>',
		'<U/>',
		'<E51/>',
		'<V/>',
		'<F42/>',
		'<W/>',
		'<G60/>',
		'<T0/>',
		//'<D p="66" />',
		'<D66/>',
		'<U/>',
		'<E109/>',
		'<V/>',
		'<F54/>',
		'<W/>',
		'<G120/>',
		'<T1/>',
		//'<D p="26" />',
		'<D26/>',
		'<U/>',
		'<e119/>',
		'<V/>',
		'<F65/>',
		'<W/>',
		'<G56/>',
		'<T132/>',
		//'<D p="31" />',
		'<D31/>',
		'<U/>',
		'<E121/>',
		'<V/>',
		'<F30/>',
		'<W/>',
		'<g80/>',
		'<T24/>',
		//'<D p="24" />',
		'<D24/>',
		'<U/>',
		'<e123/>',
		'<V/>',
		'<F14/>',
		'<W/>',
		'<g6 t="3"/>',
		//'<N type="2" />',
		'<N who="0" m="1539" />',
		'<T32/>',
		//'<D p="132" />',
		'<DORA hai="57" />',
		'<D132/>',
		'<U/>',
		'<e81/>',
		'<V/>',
		//*/

		'<REINIT seed="2,0,0,3,3,35,57" ten="237,250,276,237" oya="3" hai="0,1,21,23,32,46,47" m0="1539,27145" m3="55599" kawa0="122,108,112,133,59,103,94,66,26,31,24,132,36" kawa1="76,135,110,2,29,51,109,119,121,123,81,73" kawa2="72,115,116,117,42,54,65,30,14,40,3" kawa3="118,41,49,134,111,95,60,120,56,80,67"/>',
		'<W/>',
		'<g63/>',
		'<T91/>',
		//'<D p="32" />',
		'<D32/>',
		'<U/>',
		'<e92/>',
		'<V/>',
		'<f43/>',
		'<W/>',
		'<G77/>',
		'<T85/>',
		//'<D p="91" />',
		'<D91/>',
		'<U/>',
		'<e74/>',
		'<V/>',
		'<f78/>',
		'<W/>',
		'<g83/>',
		'<T105/>',
		//'<D p="85" />',
		'<D85/>',
		'<U/>',
		'<e125/>',
		'<V/>',
		'<F100/>',
		'<W/>',
		'<G12/>',
		'<T58/>',
		//'<D p="58" />',
		'<D58/>',
		'<U/>',
		'<e75/>',
		'<V/>',
		'<f11/>',
		'<W/>',
		'<g101/>',
		'<T10/>',
		//'<D p="10" />',
		'<D10/>',
		'<U/>',
		'<e34/>',
		'<V/>',
		'<F88/>',
		'<W/>',
		'<g44 t="1"/>',
		//'<N type="1" hai0="47" hai1="46" />',
		'<N who="0" m="16939" />',
		//'<D p="105" />',
		'<D105/>',
		'<U/>',
		'<e86/>',
		'<RYUUKYOKU ba="0,0" sc="237,10,250,-30,276,10,237,10" hai2="9,13,18,37,38,39,50,52,96,97,99,124,127" hai3="16,17,19,82,87,90,104,106,129,131" />',

	];
	let TO_INDEX = 145;
	const INTERVAL = 0;
	let parser = new DOMParser();


	let sendCommand=()=>{
		if(TO_INDEX <=0 || simulation_data.length<=0) {
			console.log(simulation_data[0]);
			return;
		}TO_INDEX--;

		let data = simulation_data.shift();
		let node = parser.parseFromString(data, 'application/xml').documentElement;
		let command = {
			tag:node.tagName
		};

		for (let i = 0; i < node.attributes.length; i++) {
			command[node.attributes[i].name] = node.attributes[i].value;
		}

		dispatcher.command(command);
		setTimeout(sendCommand, INTERVAL)
	};

	sendCommand();
});